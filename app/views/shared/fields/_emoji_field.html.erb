<%# TODO this goes in themes gem %>
<% yield %>

<%
stimulus_controller = 'fields--emoji-picker'

form ||= current_fields_form
options ||= {}
other_options ||= {}
value = form.object.send(method)
%>

<%= render 'shared/fields/field', form: form, method: method, options: options, other_options: other_options do %>
  <% content_for :field do %>
    <div data-controller="<%= stimulus_controller %>">
      <%= tag.button data: {action: "#{stimulus_controller}#toggle", target: "#{stimulus_controller}.button"} do %>
        <%= value.presence || tag.i(nil, class: "fad fa-smile text-gray-400") %>
      <% end %>
      <%= form.hidden_field method, data: {target: "emoji-picker.input"} %>
    </div>

  <% end %>
<% end %>
